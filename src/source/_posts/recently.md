---
title: Spring.River.Flower.Moon.Night
---
Do not gently go into the night.

## Doing recently

### Static Mangle and compress for dynamic template App such as Miniprogram and vue

#### Minify class names in css

```css
.veryLongClass {}

# will be changed into
.a {}
```

```html
<div class="veryLongClass"></div>
<!--will be changed into-->
<div class="a"></div>
```

```js
var test = document.querySelector('.veryLongClass');

// will be changed into
var test = document.querySelector('.a');
```

#### Mangle exports and imports for esm to cjs case

WIP

## TODOs

### Minify Protobuf.js generated static-module in esm

Protobuf is a kind of mechanism for serializing data. And it doesn't support [es module](https://github.com/protocolbuffers/protobuf/tree/master/js#:~:text=Support%20for%20ES6%2Dstyle%20imports%20is%20not%20implemented%20yet.) now. Also, its static-module generated by Closure Compiler in js is too large for no eval/Function case.

More info: [Issue](https://github.com/protobufjs/protobuf.js/issues/1689)

### How can I trace variables referenced and compress them

Somehow, we can [use babel to trace var reference](https://github.com/jamiebuilds/babel-handbook/blob/master/translations/en/plugin-handbook.md#check-if-an-identifier-is-referenced). But, it is based on static analysing. It means, while facing 'bind', 'apply', 'call' and some dynamic calling, like 'eval'/ 'Function'. It may failed.

However, maybe typescript can be referred to solve with tracing. As it can help you to 'go to definition' while coding with enhanced charactors.

### Xml parser/transfomer/generator but supporting js expression

While parsing html/xml, we are using htmlparser2 as it has more useful tool sdks. Yet we still meet a trouble that it can not work with template with dynamic js expression such as vue template or miniprogram 'wxml' files. So we intended to make it supported.

Also, there is a prepared wxml parser has been widely used in vscode plugin.

More info: [Wxml Parser](https://github.com/wxmlfile/wxml-parser)

### Ts and compiler stuff

WIP 

More info: [A useful Playground](https://github.com/type-challenges/type-challenges/blob/master/README.zh-CN.md)
